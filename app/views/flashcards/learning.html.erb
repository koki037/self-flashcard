<style>
.answerHidden {
  visibility: hidden;
}
.discriptionHidden {
  visibility: hidden;
}
</style>

<div class = "container">
  <h1 class="mt-3">
    学習
  </h1>

  <table id="table" class="mt-3 table-striped table-hover table-responsive table-lg">
    <tr>
      <th><%= Flashcard.human_attribute_name(:id) %></th>
      <th><%= Flashcard.human_attribute_name(:category) %></th>
      <th><%= Flashcard.human_attribute_name(:question) %></th>
      <th><%= Flashcard.human_attribute_name(:answer) %></th>
      <th><%= Flashcard.human_attribute_name(:description) %></th>
      <th><%= Flashcard.human_attribute_name(:answer) %>を確認</th>
    </tr>
    <% @flashcards.each do |flashcard| %>
    <tr>
      <td><%= flashcard.id %></td>
      <td><%= flashcard.category %></td>
      <td><%= safe_join(flashcard.question.split("\n"),tag(:br)) %></td>
      <td><div class="answerHidden"><%= safe_join(flashcard.answer.split("\n"),tag(:br)) %></div></td>
      <td><div class="discriptionHidden"><%= safe_join(flashcard.description.split("\n"),tag(:br)) %></div></td>
      <td><input type="button" value="表示" onclick="toggleAnswerVisibility(this)" /></td>
    </tr>
    <% end %>
  </table>
</div>


<script>
function toggleAnswerVisibility(button) {
  const row = button.parentNode.parentNode;
  const answer = row.querySelector(".answerHidden");
  const discription = row.querySelector(".discriptionHidden");

  if (answer.style.visibility === "visible") {
    answer.style.visibility = "hidden";
  } else {
    answer.style.visibility = "visible";
  }
  if (discription.style.visibility === "visible") {
    discription.style.visibility = "hidden";
  } else {
    discription.style.visibility = "visible";
  }
}
</script>